@model Domain.TeacherTimeDetails

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_UserDetails.cshtml";
    long classId = 0;
}
@*<link href="~/Content/TeacherImages.css" rel="stylesheet" />*@
<link href="~/Content/custom.css" rel="stylesheet" />
<link href="~/Content/custom-media.css" rel="stylesheet" />

<div class="container">
    <div class="card-custom">
        <div class="row">
            <div class="col-sm-9">
                <h3>The World Famous Seashell House ~ Casa Caracol</h3>
                <div class="rating-stars">
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star"></i>
                    <i class="fa fa-star-o"></i>
                </div>
                <div class="social-share">
                    <i class="fa fa-share-alt"></i>
                    <i class="fa fa-facebook"></i>
                    <i class="fa fa-twitter"></i>
                    <i class="fa fa-google-plus"></i>
                </div>

            </div>
            <div class="col-sm-3">
                <a href="#" class="btn btn-green mt-10">Available dates</a>
                <p class="custom-error">
                    Please login to Book the Vender
                </p>
            </div>
        </div>
    </div>
</div>
<section class="grey-fill">
    <div class="container">

        <div class="row">
            <div class="col-sm-8">

                <div id="sync1" class="owl-carousel owl-theme">
                    <div class="item">
                        <img class="img-responsive" src="https://foto.hrsstatic.com/fotos/0/3/694/390/80/000000/https%3A%2F%2Ffoto-origin.hrsstatic.com%2Ffoto%2F4%2F3%2F1%2F7%2F%2Fteaser_431754.jpg/aTJqapZ06IqywtysT%2FoY4w%3D%3D/3000,2250/6/ibis_Bangkok_Sukhumvit_4-Bangkok-Hotel-Bar-5-431754.jpg" />
                    </div>
                    <div class="item">
                        <img class="img-responsive" src="https://foto.hrsstatic.com/fotos/0/3/694/390/80/000000/https%3A%2F%2Ffoto-origin.hrsstatic.com%2Ffoto%2F4%2F3%2F1%2F7%2F%2Fteaser_431754.jpg/aTJqapZ06IqywtysT%2FoY4w%3D%3D/3000,2250/6/ibis_Bangkok_Sukhumvit_4-Bangkok-Hotel-Bar-5-431754.jpg" />
                    </div>
                    <div class="item">
                        <img class="img-responsive" src="https://foto.hrsstatic.com/fotos/0/3/694/390/80/000000/https%3A%2F%2Ffoto-origin.hrsstatic.com%2Ffoto%2F4%2F3%2F1%2F7%2F%2Fteaser_431754.jpg/aTJqapZ06IqywtysT%2FoY4w%3D%3D/3000,2250/6/ibis_Bangkok_Sukhumvit_4-Bangkok-Hotel-Bar-5-431754.jpg" />
                    </div>


                </div>

            </div>
            <div class="col-sm-4 custom-form">
                <form class="form-horizontal" action="#">
                    <div class="form-group ">
                        <label class="label-control required" for="name">Name</label>
                        <input type="text" class="form-control" id="name" placeholder="Enter Name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label class="label-control required" for="email">Email:</label>
                       <input type="email" class="form-control" id="email" placeholder="Enter email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label class="label-control required" for="pwd">Phone Number:</label>
                        <input type="text" class="form-control" id="phoneNumber" placeholder="Enter Phone Number" name="phoneNumber">
                    </div>
                    <div class="form-group">
                        <label class="label-control required" for="comments">Message</label>
                        <textarea class="form-control" id="comments" name="enquiry" placeholder="Enter your Enquiry" rows="5" required></textarea>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <button type="submit" class="btn btn-green">Submit</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
<section class="container">
    <div class="card-custom">
        <div class="row">
            <div class="col-sm-12">
                <h4 class="card-custom-title">Videos</h4>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="embed-responsive embed-responsive-16by9">
                            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/tgbNymZ7vqY"></iframe>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="embed-responsive embed-responsive-16by9">
                            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/tgbNymZ7vqY"></iframe>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="embed-responsive embed-responsive-16by9">
                            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/tgbNymZ7vqY"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="container">
    <div class="card-custom">
        <div class="row">
            <div class="col-sm-12">
                <h4 class="card-custom-title">Vendor details</h4>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc rhoncus nisl eu diam interdum faucibus. Fusce ultricies dapibus sem ac sodales. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque malesuada lacus nec posuere aliquet. Donec id ligula tristique, ullamcorper nisi eu, eleifend lectus. Vestibulum in blandit odio. Proin scelerisque a turpis vel porttitor. Etiam pretium faucibus varius. Phasellus pulvinar in magna ut dapibus. Sed faucibus tincidunt ultrices. Fusce tortor velit, consectetur sed pellentesque nec, convallis eget lacus. Maecenas iaculis blandit enim, ut placerat velit feugiat a.
                </p>
            </div>
        </div>
    </div>
</section>
<section class="container">
    <div class="card-custom">
        <div class="row">
            <div class="col-sm-12">
                <h4 class="card-custom-title">Comments</h4>
                <div class="custom-form">
                    <div class="from-group">
                        <label class="label-control">Your rating</label>
                        <div class="rating-stars">
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star-o"></i>
                        </div>
                    </div>
                    <div class="from-group">
                        <label class="label-control">Comments</label>
                        <textarea class="form-control"></textarea>
                    </div>
                    <div class="from-group">
                        <input type="submit" class="btn btn-green" />
                    </div>
                </div>
                <h4 class="comments-heading">100 Comments</h4>
                <ul class="list-unstyled">
                    <li>
                        <div class="comment">
                            <div class="comment-avatar">
                                <img src="https://gravatar.com/avatar/25b1fc64ba12614875c1e467d7e4c86e?s=512" class="avatar" />
                            </div>
                            <div class="comment-details">
                                <p><strong>John Doe, Chicago</strong></p>
                                <div class="rating-stars">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                </div>
                                <p>
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc rhoncus nisl eu diam interdum faucibus. Fusce ultricies dapibus sem ac sodales. Interdum et malesuada fames ac ante ipsum primis in faucibus.
                                </p>
                                <a class="btn btn-link">Reply</a>
                            </div>
                        </div>
                    </li>
                    
                    

                </ul>

            </div>
        </div>
    </div>
</section>


<div class="userdetailsPadding">
    <span id="fromDate" hidden>@Model.FromAvailableDate</span>
    <span id="toDate" hidden>@Model.ToAvailableDate</span>
    <span id="fromTime" hidden>@Model.FromAvailableTime</span>
    <span id="toTime" hidden>@Model.ToAvailableTime</span>
    <span id="Teacherid" hidden>@Model.TeacherId</span>
    <span id="todayDate" hidden>@System.DateTime.Now.ToString("yyyy-M-d")</span>
    <div class="col-sm-8">
        <div class="clearfix">
            &nbsp;
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div style="overflow-y:auto;max-height:200px;padding:5px;background-color:#fff;border:1px solid #000;color:#000;">
                    Vender Description:-  @Model.Description
                </div>
            </div>
            <div class="col-sm-2">
                <button class="btn btn-success btnDate" id="btnDate">Available Dates</button>
            </div>
            <div class="col-sm-4">
                @if (User.Identity.IsAuthenticated)
                {
                    <a href='@Url.Action("TeacherBooking", new { classId = Model.ClassId })'><input type="button" class="btn btn-success" value="Book" /></a>
                }
                else
                {
                    <p style="color:red"> Please login to Book the Vender </p>
                }
            </div>
        </div>
        <br />
        <div class="row imgThumb">
            @{
                var teacherImages = Data_Access.DbHelper.GetUserImages(0, Model.ClassId);
                if (teacherImages.Count > 0)
                {
                    <h3>Images</h3>
                }
                foreach (var img in teacherImages)
                {
                    <div class="col-md-4 col-sm-4 col-xs-12"><img class="img-responsive TeacherImages" src="@img.ImageUrl" data-zoom-image="@img.ImageUrl" @*style="height:250px;width:250px" *@ /></div>
                }
            }

        </div>

        <div class="row">
            @{
                classId = Model.ClassId;
                var teachImages = Data_Access.DbHelper.GetUservideos(Model.ClassId);
                if (teachImages.Count > 0)
                {
                    <h3>videos</h3>
                }
                foreach (var img in teachImages)
                {
                    if (!string.IsNullOrEmpty(img.VideoUrl))
                    {
                        <div class="col-lg-3 col-sm-4 col-xs-6" style="margin-right:20px;padding-left:15px">
                            <iframe height="175" src="@img.VideoUrl" frameborder="0" allowfullscreen></iframe>
                        </div>
                    }
                }
            }
        </div>
        <div style="color:#efefef;max-height:400px;overflow-y:auto;" class="row well">
            <h2 style="color:black">Comments</h2>
            @{
                var listofComments = Data_Access.DbHelper.GetUserComments(classId);
                foreach (var item in listofComments)
                {
                    <div class="UserCommentSection" style="overflow-y:auto;max-height:200px;padding:5px;background-color:#fff;margin:20px;border:1px solid #000;color:#000;">
                        <strong>  @item.UserName</strong>
                        <span>@item.Comments</span>
                        <span class="UserRating" hidden>@item.Rating</span>
                        <h6 class="Userrateyorating" style="margin-left: 18px;"></h6>
                    </div>
                }
                if (listofComments.Count == 0)
                {
                    <h3 class="text-center" style="color:black">No Comments available...</h3>
                }
            }
        </div>

        <div class="row well">

            @{
                string path = "~/Images/noimage.jpg";
                string url = Url.Content((Model.TeacherImageUrl == null) ? path : Model.TeacherImageUrl);
                <div class="col xs-12 col-md-4 img-responsive">
                    <img style="height:250px;width:250px" src="@url" alt="Loading.." />
                </div>
                <div class="col-xs-12 col-md-8 form-group">
                    <h4>Name:@Model.TeacherName</h4>
                    <h4>Category Name:@Model.SubjectName</h4>
                    <span id="rating" hidden>@Model.Rating</span>
                    <span id="teacherId" hidden>@Model.TeacherId</span>
                    <h4 style="height: 21px;"><span style="float:left;padding-top: 8px;">Rating:</span><span id="rateyorating" style="float:left;"></span></h4><br />
                    <textarea name="Comment" placeholder="Please Enter your Comments" class="form-control" style="max-width:100%;height:87px" required id="txtComments"></textarea>
                    <input value="@classId" hidden name="classId" id="classId" />
                    @if (Context.Request.IsAuthenticated)
                    {
                        <button class="btn btn-success" id="btnSubmit">Submit</button>
                    }
                    else
                    {
                        <p style="color:red">Please login to submit the Review.</p>
                    }
                </div>
            }
        </div>
    </div>

    <div class="col-sm-4">
        <div class="clearfix">&nbsp;</div>
       
        <h4>Share us at:-</h4>


        <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
        <div class="social">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <a href="#" class="link facebook" target="_parent"><span class="fa fa-facebook-square"></span></a>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-12">
                <a href="https://twitter.com/" class="link twitter" target="_parent"><span class="fa fa-twitter"></span></a>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-12">
                <a href="https://plus.google.com/" class="link google-plus" target="_parent"><span class="fa fa-google-plus-square"></span></a>
            </div>
        </div>
    </div>

</div>

@section scripts{
    <script src="~/scripts/jquery.validate.unobtrusive.js"></script>
    <script src="~/scripts/jquery.elevatezoom.js"></script>
    <script>
        $(".TeacherImages").elevateZoom({ easing: true });
    </script>
    <link href="~/Content/jquery.rateyo.min.css" rel="stylesheet" />
    <script src="~/scripts/jquery.rateyo.js"></script>
    <script>
        $(document).ready(function () {
            var ratg = $('#rating').html();

            var rat = ratg;
            function starRating(rate) {
                //alert(ratg);
                //$("#rateyorating").html("");
                $("#rateyorating").rateYo({
                    rating: rate,
                    onChange: function (rating, rateYoInstance) {
                        rat = rating;

                    }
                });
            }
            starRating(ratg);


            //$("#rateyorating").rateYo("option", "onChange");

            var teacherId = $('#teacherId').html();
            $('#btnSubmit').click(function () {
                alert(rat);
                $.ajax({
                    url: "/User/UserComments",
                    type: "post",
                    dataType: "Json",
                    contentType: "application/json",
                    data: JSON.stringify({ 'comment': $('#txtComments').val(), 'classId': $('#classId').val(), 'rating': rat, 'teachId': teacherId })
                }).success(function (data) {
                    alert("Thank u for submitting the rating");
                    //starRating(data);
                    location.reload();
                });
            });

            $('.UserRating').each(function () {
                var val = $(this).html();
                $(this).parent("div").find('.Userrateyorating').rateYo({
                    rating: val,
                    readOnly: true
                });
            });
        });

    </script>
    <script src="~/scripts/main.js"></script>
    <script src="~/scripts/jquery.datetimepicker.full.js"></script>
    <link href="~/Content/jquery.datetimepicker.css" rel="stylesheet" />
    <script type="text/javascript" src="~/assets/js/owl.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var sync1 = $("#sync1");
            var slidesPerPage = 4; //globaly define number of elements per page
            var syncedSecondary = true;

            sync1.owlCarousel({
                items: 1,
                slideSpeed: 2000,
                nav: true,
                autoplay: true,
                dots: true,
                loop: true,
                responsiveRefreshRate: 200,
                navText: ['<svg width="100%" height="100%" viewBox="0 0 11 20"><path style="fill:none;stroke-width: 1px;stroke: #000;" d="M9.554,1.001l-8.607,8.607l8.607,8.606"/></svg>', '<svg width="100%" height="100%" viewBox="0 0 11 20" version="1.1"><path style="fill:none;stroke-width: 1px;stroke: #000;" d="M1.054,18.214l8.606,-8.606l-8.606,-8.607"/></svg>'],
            }).on('changed.owl.carousel', syncPosition);


            function syncPosition(el) {
                //if you set loop to false, you have to restore this next line
                //var current = el.item.index;

                //if you disable loop you have to comment this block
                var count = el.item.count - 1;
                var current = Math.round(el.item.index - (el.item.count / 2) - .5);
                if (current < 0) {
                    current = count;
                }
                if (current > count)  {
                    current = 0;
                }
            }
        });
        $("#schedule").hide();
        $('#btnDate').click(function () {
            var fromAvailableDate = $('#fromDate').html();
            var toAvailableDate = $('#toDate').html();
            var fromAvailableTime = $('#fromTime').html();
            var toAvailableTime = $('#toTime').html();
            var TeacherId = $('#Teacherid').html();
            var todays = $('#todayDate').html();
            var dates = [];
            // debugger;
            var uri = '/User/DisableDate?teachId=' + TeacherId;

            $.getJSON(uri).done(function (data) {
                for (var i = 0; i < data.length; i++) {
                    dates[i] = data[i] + ""
                }

                calender();
                function calender() {
                    $('.btnDate').datetimepicker({
                        minDate: fromAvailableDate,
                        maxDate: toAvailableDate,
                        //minTime: fromAvailableTime,
                        //maxTime: toAvailableTime,
                        //defaultDate: fromAvailableDate,
                        defaultDate: todays,
                        //defaultTime: fromAvailableTime,
                        allowTimes: [fromAvailableTime, toAvailableTime],
                        disabledDates: dates,
                        formatDate: 'Y-m-d',
                    });

                }
            });


            function DisabledDates() {
                return dates;
            };
        });
    </script>
}
